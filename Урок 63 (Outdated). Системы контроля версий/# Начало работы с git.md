# Начало работы с git

## Создание репозитория

1. Создать пустую папку на компьютере или выбрать папку с проектом
2. Открыть с помощью GitBаsh;
3. Чтобы прицепить Git к папке — создать
локальный репозиторий — нужно выполнить
команду `git init`.
4. Чтобы проверить текущее состояние репозитория, введите в терминале команду `git status`
5. Чтобы добавить файл README.md в отслеживаемые, выполните в терминале команду
`git add + имя файла`. Можно добавить в отслеживаемые сразу много файлов. Тогда нужно воспользоваться сокращением и написать `git add -A`. В коммит попадут все файлы из текущей папки,
которые изменились с последнего коммита
6. Чтобы проверить, что файл теперь отслеживается, выполните снова команду `git
status`. При этом Git ответит, что может быть добавлен новый файл (new file). Имя файла теперь
зелёное, значит Git теперь следит за файлом
7. Процедура, при которой делается снимок файла (папки)
в текущем состоянии называется **commit**, Выполните команду `git commit -m "add README"`. В кавычках принято писать о том,
что изменилось в проекте с последнего снимка.
8. Выполните команду `git status`, чтобы убедиться, что все файлы попали
в снимок проекта

## Просмотр истории проекта

1. Выполните команду `git log --oneline`
2.  **Флаг** - Способ указать для команды дополнительные параметры.
Как правило, в Git флаг начинается с одного (-)
или двух (--) дефисов
3. Чтобы посмотреть всю информацию о коммите, выполните команду `git log` без флага.
В такой записи мы можем увидеть полный хеш коммита, автора и дату с точным временем

Если история очень длинная, то Git может перейти в режим вывода данных и не давать вводить
новые команды. В этом случае нажмите Q — режим вывода закроется и вы сможете
продолжить работу

## Исправление коммита

1. Создайте коммит с ошибкой в подписи. Для этого напишите что-нибудь в файле README.md,
сохраните файл и закоммитьте его с подписью "ewror"
2. Исправьте подпись последнего коммита. Выполните команду `git commit --amend -m "error"`

## Команды ветвления и слияния веток
1. Команда `git branch` — это своего рода “менеджер веток”. Она умеет перечислять ваши ветки, создавать новые, удалять и переименовывать их.
2. Команда `git checkout` используется для переключения веток и выгрузки их содержимого в рабочую директорию.
3. Команда `git merge` используется для слияния одной или нескольких веток в текущую. Затем она устанавливает указатель текущей ветки на результирующий коммит.
4. Команда `git log` используется для просмотра истории коммитов, начиная с самого свежего и уходя к истокам проекта. По умолчанию, она показывает лишь историю текущей ветки, но может быть настроена на вывод истории других, даже нескольких сразу, веток. Также её можно использовать для просмотра различий между ветками на уровне коммитов.

# GitHub

## Генерация нового SSH-ключа
1. Откройте терминал и выполните
   команду `ssh-keygen`
2. Терминал спросит, куда сохранить
   файл с ключом и предложит дважды
   ввести пароль для этого ключа.
   На этом этапе советуем оставить
   все настройки по умолчанию.
   Просто нажмите несколько раз Enter
3. Найдите в терминале строчку
   `Your public key has been saved in
   /c/Users/user/.ssh/id_rsa.pub.`
   Здесь важен путь, по которому
   сохранился ключ. Скопируйте
   окончание пути, начиная с /.ssh/
4. Выполните команду `cat ~/.ssh/id_rsa.pub`, где после волнистой линии вставьте путь
   до вашего файла, который вы только что скопировали
5. На экране появится длинный набор символов, строка будет начинаться с `ssh-rsa.`
   Скопируйте весь этот набор символов — это и есть SSH-ключ
6. Осталось добавить его в ваш профиль на GitHub. Нажмите кнопку New SSH key. В поле Title введите название для ключа. Оно может быть абсолютно любым.
   В большое поле ниже вставьте длинный набор символов, который только
   что скопировали из терминала. Нажмите кнопку `Add SSH key`. Теперь ваш компьютер связан с вашим профилем на GitHub

## Обновление проекта на GitHub
1. Создайте на GitHub новый репозиторий.
   Нажмите в правом верхнем углу
   на плюс и выберите `New Repository`
2. Назовите новый репозиторий colab.
   Скопируйте ссылку
3. Откройте терминал для рабочего стола. Введите команду `git clone` \*здесь ссылка на репозиторийcolab-first* \. Обратите внимание, что раньше писали только ссылку на репозиторий,
   а теперь добавили ещё colab-first. Таким образом можно указать имя для папки, в которую
   будет склонирован репозиторий. Выполните команду
4. Откройте в редакторе папку colab-first и создайте файл README.md. Добавьте туда заголовок
 Командная работа. Добавьте файл в отслеживаемые и создайте коммит с комментарием
«Initial commit». Отправьте его в репозиторий — выполните `git push -u origin main`.
Откройте GitHub и убедитесь, что коммит на месте
5. Откройте новый терминал для рабочего стола и снова выполните команду клонирования
   git clone git@github.com:NetoTrest/colab.git colab-second. Чтобы не набирать всё заново,
   можно нажать стрелку вверх несколько раз, дойдя до нужной команды. Замените в конце
   имя папки на colab-second
6. Откройте в редакторе вторую папку colab-second. Представьте, что это ваш коллега.
   Создайте файл с именем sample.md и добавьте в него заголовок ## Тестовый файл. Добавьте
   файл в отслеживаемые git add и закоммитьте его. Отправьте коммит в репозиторий с подписью
   «sample added». Тем самым вы создали подобие командной работы над одним и тем же
   проектом, но сделали это на одном компьютере
7. Вернитесь к папке colab-first. Откройте её в редакторе и запустите для неё терминал, если
   вдруг закрыли. В редакторе в файл README.md добавьте ниже заголовка через пустую строку
   любую фразу на ваше усмотрение. Закоммитьте изменения и попытайте отправить их
   в удалённый репозиторий
8. В этот момент возникает ситуация, что локальный репозиторий не совпадает с удалённым.
   В удалённом репозитории уже есть коммит, который отправили из папки colab-second.
   Нам каким-то образом нужно обновить проект в папке colab-first
9. Чтобы забрать изменения из удалённого репозитория и обновить нашу локальную копию,
   нужно использовать команду `git pull`
10. Выполните команду `git pull`. Поскольку под капотом этой команды скрывается `git merge`, то
    на последнем этапе произойдёт слияние изменений в текущую историю проекта. Откроется
    окно редактора, в котором предложат ввести подпись для коммита слияния. Чаще всего
    оставляют стандартную подпись. Так что можно сохранить файл и закрыть его. После этого
    процесс синхронизации локального и удалённого репозиториев будет выполнен
11. Закончите то, из-за чего пришлось синхронизировать проекты — отправьте коммит в удалённый
    репозиторий. Откройте GitHub и убедитесь, что все коммиты видны в репозитории. Обратите
    внимание, что коммита не три, а четыре — четвёртый создан в процессе слияния
     На этапе синхронизации могут возникать конфликты в файлах. Разрешите их, внимательно
    изучив комментарии, которые даёт Gi
12. Важно. Если вы работаете в команде,
то всегда в начале работы
и перед отправкой изменений
в удалённый репозиторий
выполняйте команду `git pull`

## Обновление проекта на GitHub
1. Откройте терминал для папки colab-first. Выполните команду `git log --oneline`, чтобы
посмотреть историю и скопировать хеш нужного коммита. Скопируйте хеш самого
первого коммита Initial commit
2. Выполните команду `git checkout `хеш коммита — в конце подставляем только что скопированный
   хеш коммита. Git выдаст довольно большую справку с предупреждением. Нас интересует
   только первая строка: Note: switching to '413857f'. Это значит, что переключение произошло
3. При открытии редактора вы увидите, что в проекте снова только файл README.md с одним
   заголовком. Мы вернулись назад — к моменту, когда в проекте был только первый коммит. Будьте осторожны. Лучше не вносить никаких изменений и не создавать коммитов
   в процессе перемещения
4. В режиме вывода информации терминал не даёт набрать никакие команды,
   а на нажатия кнопок может раздаваться звуковой сигнал
   Отличительная черта режима вывода информации — строка (END) в конце
   Можно перемещаться при помощи стрелок вверх и вниз по строкам выведенной информации
   Для выхода из режима нажмите Q (убедитесь, что включена английская раскладка)
   После выхода из режима вывода с терминалом можно продолжить работать
   в привычном формате
5. Если снова посмотрите историю, то увидите в ней только один коммит. Коммитов,
   сделанных позже, будто не существуе. Чтобы посмотреть всю историю проекта, выполните команду `git log --oneline --all`.
   Обратите внимание на новый флаг --all. С его помощью мы просим Git показать всю
   существующую историю. Тот коммит, на котором находимся сейчас, отмечен словом
   HEAD в скобках в начале строки
6. Вернёмся в реальность проекта. Выполните команду `git checkout main`. Вместо main можно
   указать имя другой ветки, в которой вы сейчас находитесь. Снова проверьте историю: теперь
   HEAD написано возле последнего коммита. Мы вернулись к текущему состоянию проекта.
   В папке проекта снова два файла
## Отмена коммита в удалённом репозитории
1. Посмотрите историю и скопируйте хеш последнего коммита. Выполните команду git revert cfb486b (хеш последнего коммита). Откроется окно
   редактора, в котором нужно ввести подпись для обратного коммита. Можно оставить
   ту, что предложена по умолчанию
2. Чтобы выйти из режима редактирования и сохранить подпись для коммита-отмены,
   нажмите Ctrl + X, Y и Enter
5. После закрытия редактора команда будет выполнена. При просмотре истории
   увидите, что был создан новый коммит
6. Отправьте новый коммит в удалённый репозиторий — выполните команду git push
7. Теперь на GitHub посмотрите, что же произошло. Сначала в истории найдите и откройте
   коммит «README changed». Тут добавили строку под заголовком. Вернитесь назад
   и откройте последний коммит «Revert "README changed"». В нём эта строка была удалена
8. При отмене коммитов могут возникать конфликты. Разрешайте их, как и в любых
   других случаях
## .gitignore
1. Файл-настройка. Создаётся в папке проекта. В нём
   указывается, какие файлы нужно игнорировать
   при публикации на GitHub:
   имя файла должно начинаться с точки, а в конце
   не должно быть никакого расширения
   правила игнорирования сработают только
   для файлов, не добавленных в индекс,
   неотслеживаемых, до команды git add
## Pull request
Запросы на слияние. Удобный способ предложить
свои изменения в командный проект в формате,
который предполагает обсуждение и код-ревью
 ## Pull request при наличии прав на работу
в репозитории
1. В локальной копии проекта создайте отдельную ветку. В ней внесите все нужные
изменения, отправьте ветку в удалённый репозиторий
2. Перейдите на вкладку Pull requests на странице репозитория на GitHub
и нажимаете кнопку `New pull request`
3. Выберите, изменения из какой ветки вы хотите предложить (правый выпадающий список)
4. Выберите, в какую ветку вы хотите влить изменения (левый выпадающий список).
Как правило, главной веткой проекта является main
5. Если содержимое веток отличается друг от друга, то ниже будет виден список коммитов
в вашей ветке, а также список файлов с подсвеченными изменениями
6. После этого нажмите кнопку `Create pull request`

## Pull request при отсутствии прав на работу
в репозитории
1. Создайте форк репозитория. В собственном форке добавьте изменения в основную ветку
   main или для соблюдения порядка создайте новую ветку под конкретные изменения
2. Чтобы создать запрос на слияние, перейдите на страницу исходного репозитория
   и откройте вкладку Pull requests, нажмите кнопку New pull request. Также можно прямо
   на главной странице форка найти и нажать кнопку Contribute и в открывшемся всплывающем
   окне нажать кнопку Open pull request. Кнопка будет активна, только если ваша копия
   проекта отличается от исходной
3. Дальше вы попадёте на страницу выбора источника изменений и ветки, в которую нужно
   выполнить слияние. Разница с предыдущим способом будет в том, что вашей ветки нет
   в проекте, она находится за его пределами. Чтобы выбрать её, нужно нажать на ссылку
   `compare across forks`. Появятся два дополнительных выпадающих списка, в которых можно
   выбрать репозитории. Левый трогать не нужно: там уже проставлен репозиторий проекта.
   В правом выберите ваш форк проекта. Если в своём форке вы вносили изменения
   не в ветку main, то выберите её в соседнем выпадающем списке
4. После нажатия кнопки Create pull request откроется интерфейс создания pull request,
   похожий на тот, что видели при создании issue. Нужно написать заголовок и добавить
   описание того, что вы предлагаете изменить. В правой колонке есть новая настройка:
   Reviewers. В ней, если у вас есть права на работу в этом репозитории, можно выбрать
   того, кто должен провести код-ревью изменений. 
5. Чтобы закончить создание pull request, нажмите кнопку `Create pull request`. Ему будет
   присвоен порядковый номер. Запрос на слияние станет виден всем, кто зайдёт на страницу
   репозитория. Владелец и контрибьюторы проекта получат уведомления. Как и issues,
   pull request нельзя удалить, можно только закрыть